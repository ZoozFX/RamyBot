<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>نموذج التسجيل</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css"/>
<style>
  body { font-family: sans-serif; padding:20px; background:#f9f9f9; direction:rtl; }
  .box { max-width:400px; margin:auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1);}
  input, button { width:100%; padding:12px; margin:8px 0; border-radius:6px; border:1px solid #ccc; }
  input { direction: rtl; text-align: right; }
  button { background:#0088cc; color:#fff; font-size:16px; }
</style>
</head>
<body>
<div class="box">
  <h2>📝 تسجيل الفوركس (عربية)</h2>
  <input id="name" placeholder="الاسم الكامل" required>
  <input id="email" type="email" placeholder="البريد الإلكتروني" required>
  <input id="phone" type="tel" placeholder="رقم الهاتف" required>
  <input id="broker" placeholder="وسيط التداول" required>
  <button onclick="submitForm()">📩 تسجيل</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<script>
  const iti = intlTelInput(document.querySelector("#phone"), { initialCountry: "eg",
    utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js" });

  async function submitForm(){
    const data = {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      phone: iti.getNumber(),
      broker: document.getElementById("broker").value
    };

    const res = await fetch("/register", {
      method: "POST",
      headers: { "Content-Type":"application/json" },
      body: JSON.stringify(data)
    });

    if(res.ok) alert("✅ تم التسجيل بنجاح!");
    else alert("❌ خطأ أثناء التسجيل!");
  }
</script>
</body>
</html>
